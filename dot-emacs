;; -*- Emacs-Lisp -*-
(defvar dot-emacs-dir "~/.dot-emacs")

(if (fboundp 'normal-top-level-add-subdirs-to-load-path)
    (let* ((my-lisp-dir dot-emacs-dir)
           (default-directory my-lisp-dir))
      (add-to-list 'load-path my-lisp-dir)
      (normal-top-level-add-subdirs-to-load-path)))

(add-to-list 'exec-path "/usr/local/bin")

(require 'package)
(setq package-list '(2048-game
                     anzu
                     company
                     smex
                     thrift
                     diminish
                     elpy
                     crontab-mode
                     gitconfig-mode
                     gitignore-mode
                     flx-ido
                     markdown-mode
                     flymake-css
                     flymake-cursor
                     flymake-google-cpplint
                     flymake-json
                     flymake-shell
                     flymake-yaml
                     yaml-mode
                     google-c-style
                     js2-mode
                     multiple-cursors
                     magit
                     nose
                     popwin
                     projectile
                     rainbow-mode
                     rainbow-delimiters
                     tangotango-theme))

(setq package-archives '(("elpa" . "http://tromey.com/elpa/")
                         ("melpa" . "http://melpa.milkbox.net/packages/")
                         ("gnu" . "http://elpa.gnu.org/packages/")
                         ("marmalade" . "http://marmalade-repo.org/packages/")))
(package-initialize)
(or (file-exists-p package-user-dir)
    (package-refresh-contents))

;; install the missing packages
(dolist (package package-list)
  (unless (package-installed-p package)
    (package-install package)))

(require 'j-terminal-compat)
(require 'j-mc)
(require 'j-util)
(require 'j-globalkeys)
(require 'j-colors)
(require 'j-appearance)
(require 'j-behavior)
(require 'j-org)
(require 'j-git)

(require 'j-cpp)
(require 'j-php)
(require 'j-python)
(require 'j-js)
(require 'j-html)
(require 'j-css)
(require 'j-thrift)
(require 'j-yaml)
(require 'j-markdown)

(require 'j-smex)
(require 'j-iswitchb)
(require 'j-completion)

(put 'ido-exit-minibuffer 'disabled nil)

(add-hook 'ediff-load-hook
          (lambda ()
            (flymake-mode nil)
            (setq ediff-highlight-all-diffs nil)
            (set-face-background
             ediff-current-diff-face-A "#1e2424")
            (set-face-background
             ediff-current-diff-face-B "#1e2424")
            (set-face-background
             ediff-current-diff-face-C "#1e2424")
            (make-face-italic
             ediff-current-diff-face-A)
            (make-face-italic
             ediff-current-diff-face-B)
            (make-face-italic
             ediff-current-diff-face-C)))

(add-hook 'ediff-prepare-buffer-hook
          (lambda ()
            (flymake-mode nil)
            ))
